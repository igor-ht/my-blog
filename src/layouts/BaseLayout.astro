---
import './BaseLayout.scss';
import BaseHead from '../components/BaseHead/BaseHead.astro';
import Footer from '../components/Footer/Footer.astro';
import Header from '../components/Header/Header.astro';
---

<!doctype html>
<html
	lang="en"
	data-theme="light"
	transition:animate="fade">
	<head>
		<BaseHead />
	</head>
	<body id="root">
		<Header />
		<slot />
		<Footer />

		<script>
			const setDarkMode = () => {
				let currentTheme;
				if (typeof localStorage !== 'undefined') {
					currentTheme = localStorage.getItem('theme');
				}
				if (currentTheme === 'dark') {
					document.documentElement.setAttribute('data-theme', 'dark');
				}
			};

			// Runs on initial navigation
			setDarkMode();
			// Runs on view transitions navigation
			document.addEventListener('astro:after-swap', setDarkMode);
		</script>
	</body>
</html>
