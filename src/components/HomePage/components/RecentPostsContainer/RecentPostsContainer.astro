---
import RecentPost from './RecentPost/RecentPost.astro';
import { getCollection } from 'astro:content';

const posts = await getCollection('blog');
---

<h1>Recent Posts</h1>
<div class="recent-posts-container">
	<section>
		{
			posts.map((post) => {
				return (
					<RecentPost
						slug={post.slug}
						data={post.data}
					/>
				);
			})
		}
	</section>
	<a href="/blog">
		<p>All Posts</p>
		<span>âž¡</span>
	</a>
</div>

<style lang="scss">
	@keyframes AllPostsAnimation {
		0% {
			transform: rotate(0deg) translateX(0) translateY(0);
			scale: 1.1;
		}
		25% {
			transform: rotate(15deg) translateX(3px) translateY(3px);
			scale: 1;
		}
		50% {
			transform: rotate(0deg) translateX(0) translateY(0);
			scale: 1.1;
		}
		75% {
			transform: rotate(-15deg) translateX(-3px) translateY(3px);
			scale: 1;
		}
		100% {
			transform: rotate(0) translateX(0) translateY(0);
			scale: 1.1;
		}
	}

	h1 {
		@include font($fontInconsolata, clamp(2.8rem, 3vw, 6rem), $color, start);
		margin: 3rem 0 0.5rem 0;
		width: 81%;
		font-weight: bolder;

		@include media-query($media-md) {
			font-size: 3rem;
			margin: 0.3rem;
			width: 100%;
		}
	}

	.recent-posts-container {
		@include general-properties(90%, auto);
		@include display-flex(column, center, center);

		section {
			@include general-properties(90%, auto);
			@include display-flex(row, center, center);
			gap: 1rem;

			@include media-query($media-lr) {
				flex-direction: column;
			}
		}

		a {
			@include display-flex(row, center);
			gap: 0.5rem;
			margin: 1rem;
			text-decoration: unset;

			p {
				@include font($fontMontserrat, clamp(1.5rem, 2vw, 2rem), $color, center);
				font-weight: bolder;
				text-decoration: underline;
			}

			span {
				@include font($fontEmoji, clamp(1.5rem, 2.5vw, 2rem), $color, justify);
			}
			&:hover {
				span {
					animation: AllPostsAnimation 1s linear infinite;
				}
			}
			&:active {
				opacity: 0.8;
			}
		}

		@include media-query($media-md) {
			width: 100%;

			section {
				width: 100%;
				gap: 0;
			}

			button {
				margin: 1rem 0 0 0;
			}
		}
	}
</style>
